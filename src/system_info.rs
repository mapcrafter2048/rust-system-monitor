use sysinfo::System;

pub fn format_bytes(bytes: u64) -> String {
    const UNITS: &[&str] = &["B", "KB", "MB", "GB", "TB"];
    let mut size = bytes as f64;
    let mut unit_index = 0;

    while size >= 1024.0 && unit_index < UNITS.len() - 1 {
        size /= 1024.0;
        unit_index += 1;
    }

    format!("{:.2} {}", size, UNITS[unit_index])
}

pub fn format_uptime(uptime_seconds: u64) -> String {
    let days = uptime_seconds / 86400;
    let hours = (uptime_seconds % 86400) / 3600;
    let minutes = (uptime_seconds % 3600) / 60;
    let seconds = uptime_seconds % 60;

    if days > 0 {
        format!("{}d {}h {}m {}s", days, hours, minutes, seconds)
    } else if hours > 0 {
        format!("{}h {}m {}s", hours, minutes, seconds)
    } else if minutes > 0 {
        format!("{}m {}s", minutes, seconds)
    } else {
        format!("{}s", seconds)
    }
}

pub fn get_cpu_temperature() -> Option<f32> {
    // This is a placeholder - actual temperature reading would require
    // platform-specific implementations or additional crates
    None
}

pub fn get_load_average() -> Option<(f32, f32, f32)> {
    // This is a placeholder - load average is Unix-specific
    // On Windows, we could calculate an equivalent based on CPU usage
    None
}

pub fn get_process_count(system: &System) -> usize {
    system.processes().len()
}